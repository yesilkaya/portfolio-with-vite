ğŸ”„ TarayÄ±cÄ± ve Sunucu ArasÄ±ndaki Ä°letiÅŸim SÃ¼reci
KullanÄ±cÄ± bir web sitesini ziyaret etmek iÃ§in tarayÄ±cÄ±nÄ±n adres Ã§ubuÄŸuna bir URL yazdÄ±ÄŸÄ±nda, tarayÄ±cÄ± bu adrese varsayÄ±lan olarak bir HTTP GET isteÄŸi gÃ¶nderir. Bu istek, sunucudan ilgili sayfanÄ±n iÃ§eriÄŸini talep eder.

TarayÄ±cÄ± bu istekle birlikte, kabul ettiÄŸi veri tÃ¼rlerini ve dilleri de Ã§eÅŸitli HTTP baÅŸlÄ±klarÄ±yla bildirir. Ã–rneÄŸin:

Accept: Hangi iÃ§erik tÃ¼rlerinin kabul edildiÄŸini (Ã¶rneÄŸin text/html, application/json).

Accept-Encoding: Gzip gibi sÄ±kÄ±ÅŸtÄ±rma tÃ¼rlerinin desteklenip desteklenmediÄŸi.

Accept-Language: KullanÄ±cÄ±nÄ±n tercih ettiÄŸi diller (Ã¶rn. tr-TR, en-US).

Sunucu, gelen bu isteÄŸe bir yanÄ±t (response) dÃ¶ner. Bu yanÄ±tta hem iÃ§erik hem de bu iÃ§eriÄŸi aÃ§Ä±klayan bazÄ± baÅŸlÄ±klar bulunur. Ã–rnek baÅŸlÄ±klar ÅŸunlardÄ±r:

Status Code: Ä°steÄŸin sonucunu belirten durum kodu (Ã¶rneÄŸin 200 OK, 404 Not Found).

Content-Type: GÃ¶nderilen verinin tipi (Ã¶rneÄŸin text/html, application/json).

Set-Cookie: TarayÄ±cÄ±ya cookie tanÄ±mlamak iÃ§in.

Date: YanÄ±tÄ±n gÃ¶nderildiÄŸi tarih ve saat.

HTML belgesi geldikten sonra tarayÄ±cÄ± bu belgeyi analiz eder. EÄŸer iÃ§inde <link>, <script>, <img>, <audio> gibi dÄ±ÅŸ kaynaklara (CSS, JavaScript, resim, simge vs.) iÅŸaret eden etiketler varsa, tarayÄ±cÄ± bu kaynaklar iÃ§in ek GET istekleri gÃ¶nderir.

TÃ¼m bu iÃ§erikler geldikten sonra tarayÄ±cÄ±:

DOM (Document Object Model) aÄŸacÄ±nÄ± oluÅŸturur,

CSS ile stil bilgilerini uygular,

JavaScript dosyalarÄ±nÄ± indirir, analiz eder ve Ã§alÄ±ÅŸtÄ±rÄ±r,

Son olarak tÃ¼m bu iÅŸlemlerin sonucunda kullanÄ±cÄ±ya sayfa arayÃ¼zÃ¼nÃ¼ render eder (Ã§izer ve gÃ¶sterir).

ğŸ§© Ek Teknik AÅŸamalar
Bu sÃ¼recin gÃ¶rÃ¼nmeyen ama Ã¶nemli bazÄ± teknik adÄ±mlarÄ± da vardÄ±r:

TarayÄ±cÄ±, isteÄŸi gÃ¶ndermeden Ã¶nce URLâ€™deki alan adÄ± iÃ§in DNS Ã§Ã¶zÃ¼mlemesi yapar ve bu alan adÄ±nÄ±n IP adresini bulur.

ArdÄ±ndan, sunucuya baÄŸlanmak iÃ§in bir TCP baÄŸlantÄ±sÄ± kurar.

EÄŸer baÄŸlantÄ± HTTPS ile yapÄ±lacaksa, bir TLS/SSL el sÄ±kÄ±ÅŸmasÄ± (handshake) sÃ¼reci gerÃ§ekleÅŸir.

Sunucudan gelen iÃ§erik sÄ±kÄ±ÅŸtÄ±rÄ±lmÄ±ÅŸsa (Ã¶rneÄŸin Content-Encoding: gzip), tarayÄ±cÄ± bunu decompress (sÄ±kÄ±ÅŸtÄ±rmayÄ± aÃ§ma) iÅŸlemine tabi tutar.

Gelen iÃ§erik JavaScript dosyasÄ±ysa, tarayÄ±cÄ± bu dosyayÄ± sadece gÃ¶rÃ¼ntÃ¼lemez, onu analiz edip Ã§alÄ±ÅŸtÄ±rÄ±r.


*******************************************

ğŸ” HTTP Mesaj YapÄ±sÄ± NasÄ±ldÄ±r?
Ä°ki ana mesaj tipi vardÄ±r:

HTTP Request (Ä°stek) â†’ TarayÄ±cÄ±dan sunucuya gider

HTTP Response (YanÄ±t) â†’ Sunucudan tarayÄ±cÄ±ya dÃ¶ner

Her ikisinin de yapÄ±sÄ± ÅŸu Ã¼Ã§ bÃ¶lÃ¼mden oluÅŸur:
    
1. BaÅŸlÄ±k (Headers)
2. BoÅŸ satÄ±r
3. GÃ¶vde (Body) [isteÄŸe baÄŸlÄ±]
ğŸ“¨ 1. HTTP Request (Ä°stemci â†’ Sunucu)
ğŸ‘‡ Ã–rnek (GET isteÄŸi):

GET /index.html HTTP/1.1
Host: example.com
User-Agent: Mozilla/5.0
Accept: text/html
Accept-Language: tr-TR
Connection: keep-alive

ğŸ§© AÃ§Ä±klamasÄ±:
GET /index.html HTTP/1.1 â†’ Ä°stek satÄ±rÄ± (ne istendiÄŸi)

Host: â†’ Hangi domain'e istek gÃ¶nderildi

User-Agent: â†’ TarayÄ±cÄ± bilgisi

Accept: â†’ Hangi iÃ§erikleri kabul ediyor

Connection: â†’ TCP baÄŸlantÄ±sÄ± aÃ§Ä±k kalsÄ±n mÄ±?

Bu Ã¶rnekte gÃ¶vde (body) yok Ã§Ã¼nkÃ¼ GET isteÄŸi veri gÃ¶ndermez, sadece veri ister.

ğŸ“¤ Ã–rnek (POST isteÄŸi):

POST /login HTTP/1.1
Host: example.com
Content-Type: application/json
Content-Length: 37

{
  "username": "seccad",
  "password": "123456"
}
Bu POST isteÄŸinde alt kÄ±sÄ±mda bir body var: KullanÄ±cÄ± adÄ± ve ÅŸifre gÃ¶nderiliyor.

ğŸ“© 2. HTTP Response (Sunucu â†’ Ä°stemci)
ğŸ‘‡ Ã–rnek YanÄ±t:

HTTP/1.1 200 OK
Content-Type: text/html
Content-Length: 1234
Set-Cookie: sessionId=abc123

<!DOCTYPE html>
<html>
  <head>...</head>
  <body>Merhaba Seccad!</body>
</html>
ğŸ§© AÃ§Ä±klamasÄ±:
HTTP/1.1 200 OK â†’ Sunucunun yanÄ±t durumu (200 baÅŸarÄ±lÄ±)

Content-Type: â†’ DÃ¶nen verinin tÃ¼rÃ¼ (HTML)

Set-Cookie: â†’ TarayÄ±cÄ±ya Ã§erez ayarlanÄ±yor

Alt kÄ±sÄ±mda: body yani HTML sayfa iÃ§eriÄŸi

ğŸ§  Ã–nemli Notlar
Her HTTP mesajÄ±, bir baÅŸlÄ±klar kÃ¼mesi (headers) ile baÅŸlar.

POST, PUT, PATCH gibi isteklerde body (gÃ¶vde) vardÄ±r.

YanÄ±tlarda da genellikle body yer alÄ±r (HTML, JSON, dosya vb.).

Content-Length â†’ GÃ¶vde boyutunu belirler.

Content-Type â†’ Ä°Ã§erik tÃ¼rÃ¼nÃ¼ tanÄ±mlar (text/html, application/json, vs.).

ğŸ¯ Ã–zet
TÃ¼r	                YÃ¶n	                Ä°Ã§erik
HTTP Request	TarayÄ±cÄ± â†’ Sunucu	GET/POST satÄ±rÄ±, headers, body
HTTP Response	Sunucu â†’ TarayÄ±cÄ±	Status code, headers, body


***********************************************

âœ… 1. Content-Type
TarayÄ±cÄ±ya gÃ¶nderilen iÃ§eriÄŸin tÃ¼rÃ¼nÃ¼ belirtir. Ã–rneÄŸin, HTML mi JSON mu olduÄŸunu bildirir.
KullanÄ±m:
res.setHeader('Content-Type', 'application/json')

âœ… 2. Content-Length
YanÄ±t gÃ¶vdesinin uzunluÄŸunu (byte cinsinden) belirtir.
KullanÄ±m:
res.setHeader('Content-Length', Buffer.byteLength(body))

âœ… 3. Set-Cookie
TarayÄ±cÄ±ya Ã§erez tanÄ±mlamak iÃ§in kullanÄ±lÄ±r.
KullanÄ±m:
res.setHeader('Set-Cookie', 'sessionId=abc123; HttpOnly')

âœ… 4. Cache-Control
Verinin Ã¶nbelleÄŸe alÄ±nÄ±p alÄ±nmayacaÄŸÄ±nÄ± ve ne kadar sÃ¼re saklanacaÄŸÄ±nÄ± belirtir.
KullanÄ±m:
res.setHeader('Cache-Control', 'no-store')

âœ… 5. Location
TarayÄ±cÄ±yÄ± baÅŸka bir adrese yÃ¶nlendirmek iÃ§in kullanÄ±lÄ±r.
KullanÄ±m:
res.setHeader('Location', '/login')

âœ… 6. Access-Control-Allow-Origin
FarklÄ± domain'lerden gelen isteklere izin verir (CORS).
KullanÄ±m:
res.setHeader('Access-Control-Allow-Origin', '*')

âœ… 7. Content-Disposition
TarayÄ±cÄ± iÃ§eriÄŸi indirilsin mi, yoksa gÃ¶rÃ¼ntÃ¼lensin mi karar verir.
KullanÄ±m:
res.setHeader('Content-Disposition', 'attachment; filename="dosya.pdf"')

âœ… 8. X-Powered-By
Sunucunun hangi teknolojiyle Ã§alÄ±ÅŸtÄ±ÄŸÄ±nÄ± belirtir (gÃ¼venlik nedeniyle genelde kaldÄ±rÄ±lÄ±r).
KullanÄ±m:
res.setHeader('X-Powered-By', 'Node.js')

âœ… 9. ETag
Ä°Ã§eriÄŸin eÅŸsiz versiyon kimliÄŸini belirtir (Ã¶nbellekleme iÃ§in).
KullanÄ±m:
res.setHeader('ETag', 'abc123')

âœ… 10. Last-Modified
Ä°Ã§eriÄŸin en son ne zaman deÄŸiÅŸtiÄŸini belirtir.
KullanÄ±m:
res.setHeader('Last-Modified', 'Mon, 12 Jul 2025 19:00:00 GMT')

***********************************************

ğŸª Ã‡erez (Cookie) Nedir?
Ã‡erez, sunucunun tarayÄ±cÄ±ya gÃ¶nderdiÄŸi kÃ¼Ã§Ã¼k bir metin bilgisidir.
TarayÄ±cÄ± bu Ã§erezi saklar ve aynÄ± siteye yapÄ±lan sonraki isteklerde otomatik olarak sunucuya gÃ¶nderir.

ğŸ§  Ne Ä°ÅŸe Yarar?
1. Oturum YÃ¶netimi (Session Management)
KullanÄ±cÄ± giriÅŸ yaptÄ±ktan sonra kim olduÄŸunu hatÄ±rlamak iÃ§in:

Sunucu giriÅŸ yapan kullanÄ±cÄ±ya bir sessionId=abc123 gibi Ã§erez verir.

KullanÄ±cÄ± her sayfa yenilediÄŸinde, bu Ã§erez otomatik olarak gÃ¶nderilir.

Sunucu bu Ã§erez sayesinde "Bu Seccad" diyebilir.

2. KullanÄ±cÄ± Tercihlerini HatÄ±rlamak
Tema (karanlÄ±k mod), dil ayarÄ± gibi ÅŸeyleri hatÄ±rlamak iÃ§in:

Ã–rn: theme=dark, lang=tr

***********************************************

ğŸ” GÃ¶zlemin Ã–zeti
TarayÄ±cÄ± /assets/index-B4kBxADS.js ve /assets/index-DVf2a6Ad.css isteklerini art arda (hatta neredeyse aynÄ± anda) gÃ¶ndermiÅŸ. Ve senin sunucun Ã¶nce ikinci dosyayÄ± (.css) gÃ¶ndermiÅŸ, sonra birincisini (.js).

Yani:

ğŸ”— Ä°stek alÄ±ndÄ±: GET /assets/index-B4kBxADS.js      â† 1. Ä°stek
ğŸ”— Ä°stek alÄ±ndÄ±: GET /assets/index-DVf2a6Ad.css     â† 2. Ä°stek
ğŸ“„ Dosya gÃ¶nderildi: .../index-DVf2a6Ad.css         â† 2. Cevap
ğŸ“„ Dosya gÃ¶nderildi: .../index-B4kBxADS.js          â† 1. Cevap
âš™ï¸ Bu NasÄ±l MÃ¼mkÃ¼n Oluyor?
1. TarayÄ±cÄ±, BaÄŸlantÄ±larÄ± Paralel Kurar
TarayÄ±cÄ± modern bir HTTP istemcisidir. Ä°lk HTML dosyasÄ±nda <link> ve <script> etiketlerini gÃ¶rdÃ¼ÄŸÃ¼ an, bu dosyalarÄ± eÅŸ zamanlÄ± (asenkron) olarak istemeye baÅŸlar.

Yani aynÄ± anda birden fazla TCP baÄŸlantÄ±sÄ± aÃ§abilir.

Hatta HTTP/1.1'de tarayÄ±cÄ± baÅŸÄ±na genellikle 6 baÄŸlantÄ±ya kadar izin verilir.

HTTP/2 varsa, aynÄ± TCP baÄŸlantÄ±sÄ± Ã¼zerinden birden fazla istek bile gÃ¶nderebilir (multiplexing).

2. Sunucu, Ä°stekleri BaÄŸÄ±msÄ±z Ä°ÅŸler
Senin http.createServer((req, res) => { ... }) yapÄ±n ÅŸunu saÄŸlar:

Her gelen istek iÃ§in baÄŸÄ±msÄ±z bir iÅŸlem baÅŸlatÄ±lÄ±r.

Bu yÃ¼zden req1, req2, req3 gibi istekler sÄ±ralÄ± deÄŸil, eÅŸ zamanlÄ± iÅŸlenir.

Yani sunucu ÅŸu ÅŸekilde davranÄ±r:


1. Ä°stek A geldi â†’ dosya sisteminden .js dosyasÄ± okunuyor...
2. Ä°stek B geldi â†’ dosya sisteminden .css dosyasÄ± okunuyor...
3. CSS dosyasÄ± daha kÃ¼Ã§Ã¼k veya diskten daha hÄ±zlÄ± okundu â†’ hemen gÃ¶nderildi
4. JS dosyasÄ± biraz daha geÃ§ okundu â†’ sonra gÃ¶nderildi
3. Disk Okuma SÃ¼resi + Dosya Boyutu FarkÄ±
.css dosyasÄ± kÃ¼Ã§Ã¼k ve hÄ±zlÄ± okunmuÅŸ olabilir.

.js dosyasÄ± bÃ¼yÃ¼kse veya dosya sisteminden daha yavaÅŸ geldiyse geÃ§ gÃ¶nderilmiÅŸ olabilir.

fs.readFile gibi fonksiyonlar asenkron olduÄŸundan Ã¶nce hangisi hazÄ±r olursa onu gÃ¶nderir.

***********************************************


***********************************************


***********************************************


***********************************************
